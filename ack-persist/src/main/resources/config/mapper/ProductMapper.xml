<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.ack.persist.mapper.ProductMapper">
	<resultMap type="org.ack.pojo.Product" id="ProductResultMap">
		<result property="id" column="id" />
		<result property="name" column="name" />
		<result property="type" column="type" />
		<result property="unitPrice" column="unitPrice" />
		<result property="url" column="url" />
		<result property="remark" column="remark" />
		<result property="createTime" column="createTime" />
	</resultMap>

	<sql id="base_column">
		id,name,type,unitPrice,url,remark,createTime
	</sql>
	<insert id="insert">
		INSERT INTO
		ack_product(name,type,unitPrice,url,remark,createTime)
		VALUES
		<if test="createTime != null and createTime !=''">
			(#{name},#{type},#{unitPrice},#{url},#{remark},#{createTime})
		</if>
		<if test="createTime == null or createTime ==''">
			(#{name},#{type},#{unitPrice},#{url},#{remark},now())
		</if>
	</insert>

	<select id="findByIds" parameterType="string" resultMap="ProductResultMap">
		SELECT
		<include refid="base_column"></include>
		FROM ack_product ar
		where ar.id in
		<foreach collection="array" item="ids" index="index" open="("
			close=")" separator=",">
			#{ids}
		</foreach>
	</select>



	<select id="findById" parameterType="int" resultMap="ProductResultMap">
		SELECT
		<include refid="base_column"></include>
		FROM
		ack_product
		WHERE id = #{id}
	</select>
	
	<select id="find" parameterType="int" resultMap="ProductResultMap">
		SELECT
		<include refid="base_column"></include>
		FROM
		ack_product
		WHERE id = #{id}
	</select>

	<update id="update" parameterType="Product">
		UPDATE
		ack_product ar
		<set>
			<if test="name != null and name !=''">
				ar.name = #{name},
			</if>
			<if test="type != null and type !=''">
				ar.type = #{type},
			</if>
			<if test="unitPrice != null and unitPrice !=''">
				ar.unitPrice = #{unitPrice},
			</if>
			<if test="url != null and url !=''">
				ar.url = #{url},
			</if>
			<if test="unitPrice != null and unitPrice !=''">
				ar.unitPrice = #{unitPrice},
			</if>
			<if test="createTime != null and createTime !=''">
				ar.createTime = #{createTime},
			</if>
		</set>
		<where>
			id = #{id}
		</where>
	</update>

	<delete id="deleteById" parameterType="int">
		DELETE FROM ack_product
		WHERE id = #{id}
	</delete>

	<delete id="delete" parameterType="Product">
		DELETE FROM ack_product
		WHERE id = #{id}
	</delete>

	<select id="findAll" resultMap="ProductResultMap">
		SELECT
		<include refid="base_column"></include>
		FROM
		ack_product
	</select>
	
	<select id="findInterceptorPageList" parameterType="org.ack.persist.page.Page"
		resultMap="ProductResultMap">
		SELECT
		<include refid="base_column"></include>
		FROM
		ack_product
		<where>
		    1 = 1
		    <if test="condition.name != null and condition.name !=''">
			    and name=#{condition.name}
		    </if>
		    <if test="condition.type != null and condition.type !=''">
			    and type=#{condition.type}
		    </if>
		</where>
		
	</select>

</mapper>